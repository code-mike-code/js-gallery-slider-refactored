(()=>{"use strict";var e=class{constructor(e){this.imagesList=document.querySelectorAll(e),console.log("lista zdjęć",this.imagesList),this.sliderRootElement=document.querySelector(".js-slider"),this.imageElement=this.sliderRootElement.querySelector(".js-slider__image"),this.captionElement=this.sliderRootElement.querySelector(".js-slider__caption"),this.prevButton=this.sliderRootElement.querySelector(".js-slider__nav--prev"),this.nextButton=this.sliderRootElement.querySelector(".js-slider__nav--next"),this.thumbsContainer=this.sliderRootElement.querySelector(".js-slider__thumbs"),this.currentSlideIndex=0,this.intervalId=null,this.autoplayInterval=2500,console.log("JSSlider utworzony")}initGalleryEvents(){this.imagesList.forEach((e=>{e.addEventListener("click",(e=>{this.openSlider(e)}))}))}openSlider(e){var t=e.currentTarget;console.log("kliknięty obrazek",t),this.sliderRootElement.classList.add("js-slider--active");var s=t.querySelector("img").src;this.imageElement.src=s;var r=t.dataset.sliderGroupName;this.autoplayStart(),console.log("grupa obrazków",r),this.createThumbs(r,s)}createThumbs(e,t){var s=this.thumbsContainer.querySelector(".js-slider__thumbs-item--prototype");s?(this.thumbsContainer.querySelectorAll(".js-slider__thumbs-item:not(.js-slider__thumbs-item--prototype)").forEach((e=>e.remove())),this.currentGroupImages=Array.from(this.imagesList).filter((t=>t.dataset.sliderGroupName===e)),console.log(this.currentGroupImages),this.currentSlideIndex=this.currentGroupImages.findIndex((e=>e.querySelector("img").src===t)),this.currentGroupImages.forEach((e=>{var r=s.cloneNode(!0);r.classList.remove("js-slider__thumbs-item--prototype");var i=r.querySelector("img"),l=e.querySelector("img").src;i.src=l,l===t&&i.classList.add("js-slider__thumbs-image--current"),this.thumbsContainer.appendChild(r)})),console.log("utworzone miniatury",e),console.log("aktualny index slajdu",this.currentSlideIndex)):console.log("prototyp nie znaleziony")}changeSlide(e){var t=this.currentGroupImages[e].querySelector("img").src;this.imageElement.src=t;var s=this.thumbsContainer.querySelector(".js-slider__thumbs-image--current");s&&s.classList.remove("js-slider__thumbs-image--current"),this.thumbsContainer.querySelectorAll(".js-slider__thumbs-item:not(.js-slider__thumbs-item--prototype) img").forEach((e=>{e.src===t&&e.classList.add("js-slider__thumbs-image--current")})),this.currentSlideIndex=e,console.log("zamiana slajdu na index",this.currentSlideIndex)}handleNextSlide(){var e=this.currentSlideIndex+1;e>=this.currentGroupImages.length&&(e=0),this.changeSlide(e)}handlePrevSlide(){var e=this.currentSlideIndex-1;e<0&&(e=this.currentGroupImages.length-1),this.changeSlide(e)}closeSlider(){this.sliderRootElement.classList.remove("js-slider--active"),this.autoplayStop(),console.log("zamknięcie slider-a")}initSliderEvents(){this.nextButton.addEventListener("click",(()=>{this.handleNextSlide()})),this.prevButton.addEventListener("click",(()=>{this.handlePrevSlide()}));var e=this.sliderRootElement.querySelector(".js-slider__zoom");e&&e.addEventListener("click",(e=>{e.target===e.currentTarget&&this.closeSlider()}));var t=[this.nextButton,this.prevButton];t.forEach((e=>{e.addEventListener("mouseenter",(()=>{console.log("mouse enter event");var e=new CustomEvent("js-slider-stop");this.sliderRootElement.dispatchEvent(e)}))})),t.forEach((e=>{e.addEventListener("mouseleave",(()=>{console.log("mouse leave event");var e=new CustomEvent("js-slider-start");this.sliderRootElement.dispatchEvent(e)}))}))}autoplayStart(){null===this.intervalId&&(console.log("autoplay start"),this.intervalId=setInterval((()=>{this.handleNextSlide()}),this.autoplayInterval))}autoplayStop(){null!==this.intervalId&&(console.log("autoplay stop"),clearInterval(this.intervalId),this.intervalId=null)}run(){console.log("JSSlider został uruchomiony"),this.initGalleryEvents(),this.initSliderEvents(),this.sliderRootElement.addEventListener("js-slider-start",(()=>{this.autoplayStart()})),this.sliderRootElement.addEventListener("js-slider-stop",(()=>{this.autoplayStop()}))}};document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".gallery__item").forEach((e=>{e.dataset.sliderGroupName=Math.random()>.5?"nice":"good"})),new e(".gallery__item").run()}))})();